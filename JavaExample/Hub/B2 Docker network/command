https://viblo.asia/p/docker-networking-nhung-khai-niem-va-cach-su-dung-co-ban-gGJ59P2JlX2
https://viblo.asia/p/giao-tiep-giua-cac-container-trong-docker-va-su-dung-docker-compose-GrLZDWoJKk0
Docker network là gì?
Là hệ thống cung cấp hầu hết các chức năng hệ thống mạng cần có dùng trong docker
các loại chính?
1. BRIDGE
la network default, các container chạy độc lập và có thể giao tiếp với nhau qua địa chỉ ip
Ko hỗ trợ nhận diện host và muốn connect ra ngoài thì phải dùng options "links" 
2. HOST
Khi conatainer cần sử dụng lớp mạng ở host, connect thẳng container ra ngoài host
3. OVERLAY
Giao tiếp giữa nhiều docker daemon và giữa các cụm service với nhau
4. MAC
Mạng Macvlan cho phép chúng ta gán địa chỉ MAC cho container, 
điều này làm cho mỗi container như là một thiết bị vật lý trong mạng.
Docker daemon định tuyến truy cập tới container bởi địa chỉ MAC. 
Sử dụng driver macvlan là lựa chon tốt khi các ứng dụng khác cần phải connect đến theo địa chỉ vật lý 
hơn là thông qua các lớp mạng của máy chủ.
5. NONE
Disable networking, khÔng sử dụng được với docker swarm
Dùng làm gì?
6.Tạo network ntn?
# docker network create [OPTIONS] NETWORK
ex:
$ docker network create [OPTIONS] NETWORK
$ docker network create -d bridge my-bridge-network
7. options
--gateway: Địa chỉ Ip của Gateway (IPv4 hay IPv6) cho mạng con
--ip-range: Xác định một dải IPs sử  dụng trong mạng
--internal: Hạn chế  access từ bên ngoài vào mạng
--ipv6: Bật IPv6
--subnet: Chọn mạng con
ex:
$ docker network create -d bridge  --subnet=10.11.0.0/16 --gateway=10.11.0.1  my-bridge-net

Docker join network ntn?
# docker run --network=bridge -itd --name=container1 normal-app:dev


8. Docker gọi nhau qua network ntn?
9.Compare?
10. Sử dụng network qua docker-compose
Khi dùng docker-compose thì nếu không khai báo network, 
docker sẽ tự động khởi tạo một mạng dành cho app và driver sẽ là bridge.
# docker-compose up
Creating network "api_default" with the default driver
11. khai báo docker compose
Muốn sử dụng luôn mạng của host, ko dùng mạng docker
services:
  app:
    network_mode: host

Khai báo qua networks trong docker-compose.yml

...
services:
  app:
    networks:
      - api-net
...
networks:
  api-net:
    driver: host

12. Xoá net work 
# docker network rm my-bridge-network

13. Command
check net work
# docker network ls
none brigde va host là mặc định
khi chỉ định network cho container
# docker run --network=<NETWORK>

check docker network 
# docker network rm my-bridge-network
15. create user defined network
# docker network create --driver bridge my_network
# docker run -itd --network my_network --name C3 busybox
16. container join to bridge network
# docker network connect bridge [container_name]
17. disconnect a container to bridge network
# docker network disconnect bridge [container_name]
18. HOME WORK
# docker pull busybox
# docker run -itd --name=C1 busybox
# docker run -itd --name=C2 busybox
# docker network inspect bridge
# docker exec -it C1 sh
# ifconfig
# ping [C2 ip] 
